--------------------------------------------------------
-- Archivo creado  - martes-octubre-08-2019   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence DEMO_CUST_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."DEMO_CUST_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 321 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence DEMO_ORDER_ITEMS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."DEMO_ORDER_ITEMS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence DEMO_ORD_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."DEMO_ORD_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 31 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence DEMO_PROD_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."DEMO_PROD_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence DEMO_USERS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."DEMO_USERS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_ADMIN
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_ADMIN"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 141 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_AGENDA
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_AGENDA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 161 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_COTIZACION
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_COTIZACION"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 121 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_EDIFICIO
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_EDIFICIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 121 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_MATERIAL
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_MATERIAL"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_PAQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_PAQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_TMATERIAL
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_TMATERIAL"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 161 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_TPAQ
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_TPAQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence INSERTA_USUARIO
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."INSERTA_USUARIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 181 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SECUENCIA_ID_BOLETA
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SECUENCIA_ID_BOLETA"  MINVALUE 1 MAXVALUE 99999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_AGENDAR
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_AGENDAR"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ATENCION
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_ATENCION"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_CIERRE_ORDEN
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_CIERRE_ORDEN"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_DAR_AVISO
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_DAR_AVISO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_DERIVAR
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_DERIVAR"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ESPECIALIDAD
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_ESPECIALIDAD"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_FICHA_MEDICA
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_FICHA_MEDICA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_HISTORIAL_MEDICO
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_HISTORIAL_MEDICO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_HORARIO
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_HORARIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_AGREGAR
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_ID_AGREGAR"  MINVALUE 1 MAXVALUE 999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_IDATENCION
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_IDATENCION"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_IDNOTA
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_IDNOTA"  MINVALUE 1 MAXVALUE 999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_IDPAGO
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_IDPAGO"  MINVALUE 1 MAXVALUE 999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_PAGO_HONORARIOS
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_ID_PAGO_HONORARIOS"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_PACIENTE
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_PACIENTE"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_PERSONAL
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_PERSONAL"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_REGISTRARSE_PREVISION
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_REGISTRARSE_PREVISION"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_TIPOS_ATENCIONES
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."SEQ_TIPOS_ATENCIONES"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence USUARIO_SEQUENCIA
--------------------------------------------------------

   CREATE SEQUENCE  "PRUEBA"."USUARIO_SEQUENCIA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table DEPARTAMENTO
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."DEPARTAMENTO" 
   (	"ID" NUMBER, 
	"NOMBRE" VARCHAR2(300 BYTE), 
	"UBICACION" VARCHAR2(300 BYTE), 
	"BANOS" VARCHAR2(20 BYTE), 
	"HABITACIONES" VARCHAR2(20 BYTE), 
	"VALORARRIENDO" FLOAT(126), 
	"DESCRIPCION" VARCHAR2(600 BYTE), 
	"FECHA" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table INVENTARIO
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."INVENTARIO" 
   (	"ID_INV" NUMBER, 
	"ID_DEPTO" VARCHAR2(20 BYTE), 
	"PRODUCTO" VARCHAR2(300 BYTE), 
	"CANTIDAD" VARCHAR2(20 BYTE), 
	"ESTADO" VARCHAR2(100 BYTE), 
	"DESCRIPCION" VARCHAR2(700 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table LOCALIDADES
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."LOCALIDADES" 
   (	"ID_LOCALIDAD" NUMBER, 
	"NOMBRE_LOCALIDAD" VARCHAR2(700 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table RESERVA
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."RESERVA" 
   (	"ID_RESERVA" NUMBER(10,0), 
	"FECHA_RESERVA" VARCHAR2(60 BYTE), 
	"CANTIDAD_PERSONAS" VARCHAR2(10 BYTE), 
	"FECHA_SALIDA" VARCHAR2(60 BYTE), 
	"RUT" VARCHAR2(20 BYTE), 
	"ID_DEPARTAMENTO" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ROLES
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."ROLES" 
   (	"ID_ROL" NUMBER, 
	"DESCRIPCION" VARCHAR2(50 BYTE), 
	"VIGENTE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ROLES_USUARIOS
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."ROLES_USUARIOS" 
   (	"ID_USUARIO" NUMBER, 
	"ID_ROL" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USUARIO
--------------------------------------------------------

  CREATE TABLE "PRUEBA"."USUARIO" 
   (	"ID_USUARIO" NUMBER, 
	"RUT_USUARIO" VARCHAR2(15 BYTE), 
	"NOMBRE" VARCHAR2(50 BYTE), 
	"APELLIDO" VARCHAR2(50 BYTE), 
	"CORREO" VARCHAR2(100 BYTE), 
	"PASS" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into PRUEBA.DEPARTAMENTO
SET DEFINE OFF;
Insert into PRUEBA.DEPARTAMENTO (ID,NOMBRE,UBICACION,BANOS,HABITACIONES,VALORARRIENDO,DESCRIPCION,FECHA) values ('21','Edificio nogales','Talca      ','1','1','4500','otra ves','2019-09-30');
Insert into PRUEBA.DEPARTAMENTO (ID,NOMBRE,UBICACION,BANOS,HABITACIONES,VALORARRIENDO,DESCRIPCION,FECHA) values ('22','Edificio miraflores','Valparaiso      ','2','2','4500000','prueba edicion','2019-09-30');
Insert into PRUEBA.DEPARTAMENTO (ID,NOMBRE,UBICACION,BANOS,HABITACIONES,VALORARRIENDO,DESCRIPCION,FECHA) values ('32','Arriendo ','Valparaiso','1','1','45000','<p>prueba</p>','2019-10-03');
Insert into PRUEBA.DEPARTAMENTO (ID,NOMBRE,UBICACION,BANOS,HABITACIONES,VALORARRIENDO,DESCRIPCION,FECHA) values ('309','Edificio San Carlos','Santiago','2','2','340000','<p>En arriendo</p>
','2019-10-08');
Insert into PRUEBA.DEPARTAMENTO (ID,NOMBRE,UBICACION,BANOS,HABITACIONES,VALORARRIENDO,DESCRIPCION,FECHA) values ('61','Edificio costa azul','Puerto Varas','3','4','250000','<p>En arriendo</p>
','2019-10-06');
REM INSERTING into PRUEBA.INVENTARIO
SET DEFINE OFF;
Insert into PRUEBA.INVENTARIO (ID_INV,ID_DEPTO,PRODUCTO,CANTIDAD,ESTADO,DESCRIPCION) values ('26','21','notebook','1','bueno','bueno');
Insert into PRUEBA.INVENTARIO (ID_INV,ID_DEPTO,PRODUCTO,CANTIDAD,ESTADO,DESCRIPCION) values ('27','21','prueba','1','bueno','bueno');
Insert into PRUEBA.INVENTARIO (ID_INV,ID_DEPTO,PRODUCTO,CANTIDAD,ESTADO,DESCRIPCION) values ('28','21','PRUEBAS DE CARGA 4533','1','1',null);
Insert into PRUEBA.INVENTARIO (ID_INV,ID_DEPTO,PRODUCTO,CANTIDAD,ESTADO,DESCRIPCION) values ('44','22','Velador','2','Bonito','Pollito al velador');
Insert into PRUEBA.INVENTARIO (ID_INV,ID_DEPTO,PRODUCTO,CANTIDAD,ESTADO,DESCRIPCION) values ('1','21','HOLA','1','BUENO','PRUEBA');
REM INSERTING into PRUEBA.LOCALIDADES
SET DEFINE OFF;
Insert into PRUEBA.LOCALIDADES (ID_LOCALIDAD,NOMBRE_LOCALIDAD) values ('307','SANTIAGO');
REM INSERTING into PRUEBA.RESERVA
SET DEFINE OFF;
Insert into PRUEBA.RESERVA (ID_RESERVA,FECHA_RESERVA,CANTIDAD_PERSONAS,FECHA_SALIDA,RUT,ID_DEPARTAMENTO) values ('24','2019-10-01','4','2019-10-19','18213561-5','21');
Insert into PRUEBA.RESERVA (ID_RESERVA,FECHA_RESERVA,CANTIDAD_PERSONAS,FECHA_SALIDA,RUT,ID_DEPARTAMENTO) values ('29','2019-10-04','4','2019-10-20','18213561-5','22');
Insert into PRUEBA.RESERVA (ID_RESERVA,FECHA_RESERVA,CANTIDAD_PERSONAS,FECHA_SALIDA,RUT,ID_DEPARTAMENTO) values ('31','2019-10-01','5','2019-10-27','18213561-5','22');
Insert into PRUEBA.RESERVA (ID_RESERVA,FECHA_RESERVA,CANTIDAD_PERSONAS,FECHA_SALIDA,RUT,ID_DEPARTAMENTO) values ('41','2019-10-01','4','2019-10-27','19039431-k','22');
Insert into PRUEBA.RESERVA (ID_RESERVA,FECHA_RESERVA,CANTIDAD_PERSONAS,FECHA_SALIDA,RUT,ID_DEPARTAMENTO) values ('43','2019-10-31','3','2019-11-02','19039431-k','22');
REM INSERTING into PRUEBA.ROLES
SET DEFINE OFF;
Insert into PRUEBA.ROLES (ID_ROL,DESCRIPCION,VIGENTE) values ('1','Administrador',null);
Insert into PRUEBA.ROLES (ID_ROL,DESCRIPCION,VIGENTE) values ('2','Funcionario',null);
Insert into PRUEBA.ROLES (ID_ROL,DESCRIPCION,VIGENTE) values ('5','Cliente',null);
REM INSERTING into PRUEBA.ROLES_USUARIOS
SET DEFINE OFF;
Insert into PRUEBA.ROLES_USUARIOS (ID_USUARIO,ID_ROL) values ('141','1');
Insert into PRUEBA.ROLES_USUARIOS (ID_USUARIO,ID_ROL) values ('161','1');
Insert into PRUEBA.ROLES_USUARIOS (ID_USUARIO,ID_ROL) values ('162','2');
Insert into PRUEBA.ROLES_USUARIOS (ID_USUARIO,ID_ROL) values ('163','5');
REM INSERTING into PRUEBA.USUARIO
SET DEFINE OFF;
Insert into PRUEBA.USUARIO (ID_USUARIO,RUT_USUARIO,NOMBRE,APELLIDO,CORREO,PASS) values ('141','18213561-5','Manuel','Torres','alejandro.torresolivos@gmail.com','123');
Insert into PRUEBA.USUARIO (ID_USUARIO,RUT_USUARIO,NOMBRE,APELLIDO,CORREO,PASS) values ('162','19084218-5','Renzo Crisitan','Espeleta','renzo.espeleta@gmail.com','123');
Insert into PRUEBA.USUARIO (ID_USUARIO,RUT_USUARIO,NOMBRE,APELLIDO,CORREO,PASS) values ('163','19039431-k','Matias','Quezada','mat.quezada@alumnos.duoc.cl','123');
Insert into PRUEBA.USUARIO (ID_USUARIO,RUT_USUARIO,NOMBRE,APELLIDO,CORREO,PASS) values ('161','18513856-9','Roberto alonso','Gonzalez','rober.gonzalez@alumnos.duoc.cl','123');
--------------------------------------------------------
--  DDL for Index ROLES_USUARIOS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PRUEBA"."ROLES_USUARIOS_PK" ON "PRUEBA"."ROLES_USUARIOS" ("ID_USUARIO", "ID_ROL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index DEPARTAMENTO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PRUEBA"."DEPARTAMENTO_PK" ON "PRUEBA"."DEPARTAMENTO" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index UQ_USUARIO_CORREO
--------------------------------------------------------

  CREATE UNIQUE INDEX "PRUEBA"."UQ_USUARIO_CORREO" ON "PRUEBA"."USUARIO" ("CORREO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index ROLES_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PRUEBA"."ROLES_PK" ON "PRUEBA"."ROLES" ("ID_ROL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index UQ_USUARIO_RUT
--------------------------------------------------------

  CREATE UNIQUE INDEX "PRUEBA"."UQ_USUARIO_RUT" ON "PRUEBA"."USUARIO" ("RUT_USUARIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index USUARIO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PRUEBA"."USUARIO_PK" ON "PRUEBA"."USUARIO" ("ID_USUARIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger INSERTAR_USUARIO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PRUEBA"."INSERTAR_USUARIO" 
before insert on usuario
for each row
begin
select inserta_usuario.nextval into :new.id_usuario from dual;
end;

/
ALTER TRIGGER "PRUEBA"."INSERTAR_USUARIO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVALCOALIDAD
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PRUEBA"."NUEVALCOALIDAD" 
   before insert on "PRUEBA"."LOCALIDADES" 
   for each row 
begin  
   if inserting then 
      if :NEW."ID_LOCALIDAD" is null then 
         select DEMO_CUST_SEQ.nextval into :NEW."ID_LOCALIDAD" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "PRUEBA"."NUEVALCOALIDAD" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVALOCALIDAD
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PRUEBA"."NUEVALOCALIDAD" 
   before insert on "PRUEBA"."INVENTARIO" 
   for each row 
begin  
   if inserting then 
      if :NEW."" is null then 
         select .nextval into :NEW."" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "PRUEBA"."NUEVALOCALIDAD" DISABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVODEPARTAMENTO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PRUEBA"."NUEVODEPARTAMENTO" 
   before insert on "PRUEBA"."DEPARTAMENTO" 
   for each row 
begin  
   if inserting then 
      if :NEW."ID" is null then 
         select DEMO_CUST_SEQ.nextval into :NEW."ID" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "PRUEBA"."NUEVODEPARTAMENTO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOINVENTARIO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PRUEBA"."NUEVOINVENTARIO" 
   before insert on "PRUEBA"."INVENTARIO" 
   for each row 
begin  
   if inserting then 
      if :NEW."ID_INV" is null then 
         select DEMO_CUST_SEQ.nextval into :NEW."ID_INV" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "PRUEBA"."NUEVOINVENTARIO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger PRUEBA
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PRUEBA"."PRUEBA" 
   before insert on "PRUEBA"."RESERVA" 
   for each row 
begin  
   if inserting then 
      if :NEW."ID_RESERVA" is null then 
         select DEMO_CUST_SEQ.nextval into :NEW."ID_RESERVA" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "PRUEBA"."PRUEBA" ENABLE;
--------------------------------------------------------
--  DDL for Procedure P_CREAR_DEPARTAMENTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "PRUEBA"."P_CREAR_DEPARTAMENTO" 
(v_nombre varchar, v_ubicacion varchar, v_banos varchar,v_habitaciones varchar,v_valorarriendo float,v_descripcion varchar,v_fecha varchar)
IS
v_id number;
begin
  insert into departamento
  values(0,v_nombre,v_ubicacion,v_banos,v_habitaciones,v_valorarriendo,v_descripcion,v_fecha);

  select max(id) into v_id
  from departamento;

  dbms_output.put_line('MAX ID:  '||v_id);
end;

/
--------------------------------------------------------
--  DDL for Procedure P_CREAR_USUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "PRUEBA"."P_CREAR_USUARIO" 
(v_rut varchar, v_nombre varchar, v_apellido varchar, v_correo varchar, v_pass varchar, rol number)
IS
v_id number;
begin
  insert into usuario
  values(0,v_rut,v_nombre,v_apellido,v_correo,v_pass);

  select max(id_usuario) into v_id
  from usuario;

  insert into roles_usuarios
  values(v_id,rol);
  dbms_output.put_line('MAX ID:  '||v_id);
end;


/
--------------------------------------------------------
--  DDL for Procedure P_ELIMINAR_USUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "PRUEBA"."P_ELIMINAR_USUARIO" 
(v_id number)
IS

begin
delete from roles_usuarios
  where ID_USUARIO = v_id;

  delete from usuario
  where ID_USUARIO=v_id;
  dbms_output.put_line(v_id||' Eliminado con exito');
end;


/
--------------------------------------------------------
--  DDL for Procedure P_LISTAR_SOLICITUDES_CLIENTE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "PRUEBA"."P_LISTAR_SOLICITUDES_CLIENTE" 
(
 v_rutCliente varchar, p_ResultSet  OUT  TYPES.cursorType
)
AS
BEGIN
OPEN p_ResultSet FOR
select id_reserva as id, fecha_reserva as fecha_sol
from RESERVA
where RUT=v_rutCliente
order by FECHA_RESERVA desc;

END p_listar_solicitudes_cliente;

/
--------------------------------------------------------
--  DDL for Procedure P_LISTAR_USUARIOS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "PRUEBA"."P_LISTAR_USUARIOS" 
(
p_ResultSet  OUT  TYPES.cursorType
)
AS
BEGIN
OPEN p_ResultSet FOR
Select a.id_usuario as id, c.descripcion as rol , a.rut_usuario as rut, a.nombre as nombre, 
a.apellido as apellido, a.correo as correo, a.pass as pass
from usuario a join roles_usuarios b on(a.id_usuario=b.id_usuario) join roles c using(id_rol) order by a.id_usuario;

END p_listar_usuarios;


/
--------------------------------------------------------
--  DDL for Procedure P_MODIFICAR_USUARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "PRUEBA"."P_MODIFICAR_USUARIO" 
(v_rut varchar, v_nombre varchar, v_apellido varchar, v_correo varchar, v_pass varchar)
IS

begin
  update usuario set nombre=v_nombre, apellido=v_apellido, correo=v_correo, pass=v_pass
  where rut_usuario= v_rut;
end;


/
--------------------------------------------------------
--  DDL for Package TYPES
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "PRUEBA"."TYPES" 
AS
type cursorType is ref cursor;
END;


/
--------------------------------------------------------
--  DDL for Function F_RETORNAR_NOMBRE
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "PRUEBA"."F_RETORNAR_NOMBRE" 
(v_correo IN varchar) return varchar 
IS
  v_nombre varchar(100);
  v_apellido varchar(100);
BEGIN
  select nombre || ' ' || apellido into v_nombre
  from usuario
  where CORREO = v_correo;
  return(v_nombre);
END f_retornar_nombre;

/
--------------------------------------------------------
--  DDL for Function F_RETORNAR_RUT
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "PRUEBA"."F_RETORNAR_RUT" 
(v_correo IN varchar) return varchar 
IS
  v_rut varchar(20);
BEGIN
  select rut_usuario into v_rut
  from usuario
  where CORREO = v_correo;
  return(v_rut);
END f_retornar_rut;


/
--------------------------------------------------------
--  DDL for Function LOGIN_USUARIO
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "PRUEBA"."LOGIN_USUARIO" (p_rut usuario.rut %type,p_contrasena usuario.contrasena %type)return integer is

p_rut_bd usuario.rut %type;
p_contrasena_bd usuario.contrasena %type;
 BEGIN
select rut, contrasena into p_rut_bd, p_contrasena_bd from usuario where rut = p_rut and contrasena = p_contrasena;
if p_contrasena = p_contrasena_bd and p_rut = p_rut_bd then
 return 1;
 else
 return 0;
 end if;
 exception 
 when NO_DATA_FOUND THEN
 RETURN 0;
 END;


/
--------------------------------------------------------
--  Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "PRUEBA"."USUARIO" MODIFY ("ID_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."USUARIO" MODIFY ("RUT_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."USUARIO" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."USUARIO" MODIFY ("APELLIDO" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."USUARIO" MODIFY ("CORREO" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."USUARIO" MODIFY ("PASS" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."USUARIO" ADD CONSTRAINT "USUARIO_PK" PRIMARY KEY ("ID_USUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "PRUEBA"."USUARIO" ADD CONSTRAINT "UQ_USUARIO_RUT" UNIQUE ("RUT_USUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "PRUEBA"."USUARIO" ADD CONSTRAINT "UQ_USUARIO_CORREO" UNIQUE ("CORREO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table INVENTARIO
--------------------------------------------------------

  ALTER TABLE "PRUEBA"."INVENTARIO" MODIFY ("ESTADO" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table DEPARTAMENTO
--------------------------------------------------------

  ALTER TABLE "PRUEBA"."DEPARTAMENTO" MODIFY ("HABITACIONES" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."DEPARTAMENTO" MODIFY ("UBICACION" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."DEPARTAMENTO" ADD CONSTRAINT "DEPARTAMENTO_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "PRUEBA"."DEPARTAMENTO" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ROLES_USUARIOS
--------------------------------------------------------

  ALTER TABLE "PRUEBA"."ROLES_USUARIOS" MODIFY ("ID_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."ROLES_USUARIOS" MODIFY ("ID_ROL" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."ROLES_USUARIOS" ADD CONSTRAINT "ROLES_USUARIOS_PK" PRIMARY KEY ("ID_USUARIO", "ID_ROL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ROLES
--------------------------------------------------------

  ALTER TABLE "PRUEBA"."ROLES" MODIFY ("ID_ROL" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."ROLES" MODIFY ("DESCRIPCION" NOT NULL ENABLE);
  ALTER TABLE "PRUEBA"."ROLES" ADD CONSTRAINT "ROLES_PK" PRIMARY KEY ("ID_ROL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ROLES_USUARIOS
--------------------------------------------------------

  ALTER TABLE "PRUEBA"."ROLES_USUARIOS" ADD CONSTRAINT "ROLES_USUARIOS_ROLES_FK" FOREIGN KEY ("ID_ROL")
	  REFERENCES "PRUEBA"."ROLES" ("ID_ROL") ENABLE;
  ALTER TABLE "PRUEBA"."ROLES_USUARIOS" ADD CONSTRAINT "ROLES_USUARIOS_USUARIO_FK" FOREIGN KEY ("ID_USUARIO")
	  REFERENCES "PRUEBA"."USUARIO" ("ID_USUARIO") ENABLE;
